<div class="mb-5 pb-5 fade-in">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold m-0 text-white">Meus Treinos</h2>
    <button routerLink="/new-workout" class="btn btn-success rounded-circle shadow-success btn-floating">
      <i class="bi bi-plus-lg"></i>
    </button>
  </div>

  <div class="bg-dark-light p-1 rounded-pill d-flex mb-4 border border-secondary">
    <button class="btn btn-sm flex-fill rounded-pill transition-all"
      [class.btn-dark-active]="filterType === 'ALL'" 
      [class.text-secondary]="filterType !== 'ALL'"
      (click)="setFilter('ALL')">
      Todos
    </button>
    <button class="btn btn-sm flex-fill rounded-pill transition-all"
      [class.btn-dark-active]="filterType === 'DAY'" 
      [class.text-secondary]="filterType !== 'DAY'"
      (click)="setFilter('DAY')">
      Por Dia
    </button>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
  </div>

  <div *ngIf="!isLoading" class="d-flex flex-column gap-3">
    
    <div *ngFor="let workout of filteredWorkouts" class="card-dark border-start border-4 border-success p-3">
      <div class="d-flex justify-content-between align-items-start mb-2">
        <div>
          <h5 class="fw-bold m-0 text-white">{{ workout.name }}</h5>
          <span class="badge bg-light text-dark mt-1">{{ workout.dayOfWeek }}</span>
        </div>
        
        <div class="dropdown position-relative">
          
          <button class="btn btn-link text-secondary p-0" type="button" 
                  (click)="toggleDropdown(workout.id, $event)">
            <i class="bi bi-three-dots-vertical fs-5"></i>
          </button>
          
          <ul class="dropdown-menu dropdown-menu-dark shadow" 
              [class.show]="activeDropdownId === workout.id"
              style="position: absolute; right: 0; z-index: 1000;">
            
            <li>
              <a class="dropdown-item" [routerLink]="['/edit-workout', workout.id]" style="cursor: pointer;">
                <i class="bi bi-pencil me-2"></i> Editar
              </a>
            </li>
            
            <li><hr class="dropdown-divider border-secondary"></li>

            <li>
              <button class="dropdown-item text-danger" (click)="deleteWorkout(workout.id)">
                <i class="bi bi-trash me-2"></i> Excluir
              </button>
            </li>
          </ul>
        </div>
        </div>
      
      <p class="text-secondary small mb-3">
        {{ workout.exercises?.length || 0 }} exerc√≠cios
      </p>

      <button class="btn btn-success w-100 fw-bold py-2 rounded-3 shadow-sm">
        <i class="bi bi-play-fill me-1"></i> Iniciar Treino
      </button>
    </div>

    <div *ngIf="filteredWorkouts.length === 0" class="text-center py-5 opacity-50">
      <i class="bi bi-clipboard-x fs-1 mb-2 d-block"></i>
      <p>Nenhum treino encontrado para este filtro.</p>
    </div>

  </div>
</div>